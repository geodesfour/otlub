!function(a,b,c){"use strict";var d={init:function(b,c){var d=this;d.$elem=a(c),d.options=a.extend({},a.fn.FatMenu.options,d.$elem.data(),b),d.userOptions=b,d.classes={group:"fm-group",layer:"fm-layer",breadcrumb:"fm-breadcrumb",overlay:"fm-overlay",trigger:"fm-trigger",triggerMain:"fm-main-trigger",triggerSearch:"fm-search-trigger",backButton:"fm-back-button",isMobile:"fm-is-mobile",isAnimate:"fm-is-animate",isOpen:"fm-is-open",isVisible:"fm-is-visible",isHidden:"fm-is-hidden"},d.elems={wrapper:".fm-wrapper",breadcrumbList:".fm-breadcrumb ul"},d.$breadcrumb=d.$elem.find(d.options.breadcrumbContainer),d.$wrapper=d.$elem.find(d.options.wrapperContainer),d.$body=a("body"),d.fullscreenMode=!1,d.mobileMode=!1,d.supportCssAnimation=!0,d.colorized=!0,d.options.searchLayer=d.$elem.find("."+d.options.triggerSearchClass).attr("href"),d.options.navColor||(d.colorized=!1),d.detectCSSFeature("animation")||(d.supportCssAnimation=!1),d.onStartup()},onStartup:function(){var a=this;a.browserCheckCapability(),a.mobileInit(),a.triggerInit(),a.triggerListener(),a.options.fullscreen&&(a.fullscreenMode=!0),a.options.overlay&&!a.fullscreenMode&&a.overlayInit(),a.optionsInit(),a.mobileCheck(),a.layerInit(),a.resizeEvent()},resizeEvent:function(){var c=this;a(b).on("resize",function(){c.$elem.find("."+c.options.visibleClass).length>0&&(c.hidePanel(c.$elem.find("."+c.options.visibleClass),"slideUp",!0),c.breadcrumbReset(),c.overlayHide(),c.$elem.find(".fm-is-active").removeClass("fm-is-active").css("background-color","")),c.mobileCheck(),c.$wrapper.css("background-color",""),c.$elem.find(".fm-layer").removeAttr("data-height")})},browserCheckCapability:function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},detectCSSFeature:function(a){var b=!1,d="Webkit Moz ms O".split(" "),e=c.createElement("div"),f=null;if(a=a.toLowerCase(),void 0!==e.style[a]&&(b=!0),b===!1){f=a.charAt(0).toUpperCase()+a.substr(1);for(var g=0;g<d.length;g++)if(void 0!==e.style[d[g]+f]){b=!0;break}}return b},mobileCheck:function(){var c=this;a(b).width()<c.options.mobileBreakpoint?(c.$elem.addClass(c.options.mobileClass),c.mobileMode=!0,c.fullscreenMode=!1,c.$elem.removeClass("fm-is-fullscreen")):(c.$elem.removeClass(c.options.mobileClass),c.mobileMode=!1,c.options.fullscreen&&(c.fullscreenMode=!0,c.$elem.addClass("fm-is-fullscreen")))},mobileInit:function(){var b=this,c=a(".navbar-nav").find("li").clone(),d='<div class="fm-group"><div id="layer-main" class="fm-layer"><div class="container"><ul class="fm-textlines"></ul></div></div></div>';b.$wrapper.prepend(d);var e=a("#layer-main");e.find("ul").html(c).find("a").addClass("fm-textline "+b.options.triggerMainClass).wrapInner('<h3 class="fm-textline-title"></h3>'),b.$elem.find(".navbar-header > button").removeAttr("data-toggle data-target").on("click",function(c){c.preventDefault();var d=b.$wrapper.find("."+b.options.visibleClass);return a(this).hasClass("search-toggle")?d.length>0&&"layer-search-engine"==d.attr("id")?(b.hidePanel(d,"slideUp",!0),b.overlayHide(),!1):d.length>0&&"layer-search-engine"!=d.attr("id")?(b.hidePanel(d,"slideUp",!1),b.showPanel(a("#layer-search-engine"),"slideDown"),!1):(b.showPanel(a("#layer-search-engine"),"slideDown"),b.overlayShow(),!1):d.length>0&&"layer-main"==d.attr("id")?(b.hidePanel(d,"slideUp",!0),b.overlayHide(),!1):d.length>0&&"layer-main"!=d.attr("id")?(b.hidePanel(d,"slideUp",!1),b.showPanel(a("#layer-main"),"slideDown"),!1):(b.showPanel(a("#layer-main"),"slideDown"),b.overlayShow(),!1)})},optionsInit:function(){var b=this;a("."+b.options.overlayClass).on("click",function(a){a.preventDefault(),b.hidePanel(b.$wrapper.find("."+b.options.visibleClass),"slideUp",!0),setTimeout(function(){b.breadcrumbReset(),b.$elem.find(".fm-is-active").removeClass("fm-is-active").css("background-color","")},b.options.animationDuration),b.overlayHide()}),b.fullscreenMode&&!b.mobileMode&&b.$elem.addClass("fm-is-fullscreen"),b.options.pushOnShow&&b.$elem.addClass("fm-pushOnShow")},overlayInit:function(){var a=this;a.$body.append('<div class="'+a.options.overlayClass+'"></div>')},overlayShow:function(){var b=this;a("."+b.options.overlayClass).css("display","block")},overlayHide:function(){var b=this;a("."+b.options.overlayClass).css("display","none")},layerInit:function(){var a=this;a.$elem.find(".fm-layer").addClass(a.options.hiddenClass)},showPanel:function(a,b){var c=this;return"undefined"==typeof a.attr("data-height")&&a.attr("data-height",a.outerHeight()),"slideDown"==b?(c.$body.addClass(c.options.openMenuClass),c.supportCssAnimation?(a.addClass(c.options.visibleClass+" fm-fadeInDown fm-is-animate").removeClass(c.options.hiddenClass),c.fullscreenMode?c.$wrapper.css("height","auto").addClass("fm-is-animate"):c.$wrapper.css("height",a.data("height")).addClass("fm-is-animate"),setTimeout(function(){a.removeClass("fm-fadeInDown fm-is-animate"),c.$wrapper.removeClass("fm-is-animate")},c.options.animationDuration)):(a.addClass(c.options.visibleClass).removeClass(c.options.hiddenClass),c.fullscreenMode?c.$wrapper.css("height","auto"):c.$wrapper.css("height",a.data("height"))),!1):"slideLeft"==b?(c.supportCssAnimation?(a.addClass(c.options.visibleClass+" fm-fadeInRight fm-is-animate").removeClass(c.options.hiddenClass),c.fullscreenMode?c.$wrapper.css("height","auto").addClass("fm-is-animate"):c.$wrapper.css("height",a.data("height")).addClass("fm-is-animate"),setTimeout(function(){a.removeClass("fm-fadeInRight fm-is-animate"),c.$wrapper.removeClass("fm-is-animate")},c.options.animationDuration)):(a.removeClass(c.options.hiddenClass).addClass(c.options.visibleClass),c.fullscreenMode?c.$wrapper.css("height","auto"):c.$wrapper.css("height",a.data("height"))),!1):"slideRight"==b?(c.supportCssAnimation?(a.addClass(c.options.visibleClass+" fm-fadeInLeft fm-is-animate").removeClass(c.options.hiddenClass),c.fullscreenMode?c.$wrapper.css("height","auto").addClass("fm-is-animate"):c.$wrapper.css("height",a.data("height")).addClass("fm-is-animate"),setTimeout(function(){a.removeClass("fm-fadeInLeft fm-is-animate"),c.$wrapper.removeClass("fm-is-animate")},c.options.animationDuration)):(a.addClass(c.options.visibleClass).removeClass(c.options.hiddenClass),c.fullscreenMode?c.$wrapper.css("height","auto"):c.$wrapper.css("height",a.data("height"))),!1):void 0},hidePanel:function(a,b,c){var d=this;return c="undefined"!=typeof c?c:!1,c&&(d.supportCssAnimation?setTimeout(function(){d.$body.removeClass(d.options.openMenuClass)},d.options.animationDuration):d.$body.removeClass(d.options.openMenuClass)),"slideUp"==b?(d.supportCssAnimation?(a.addClass("fm-fadeOutUp fm-is-animate"),d.$wrapper.css("height","0"),setTimeout(function(){a.removeClass("fm-fadeOutUp fm-is-animate "+d.options.visibleClass).addClass(d.options.hiddenClass)},d.options.animationDuration)):(d.$wrapper.css("height","0"),a.addClass(d.options.hiddenClass).removeClass(d.options.visibleClass)),!1):"slideLeft"==b?(d.supportCssAnimation?(a.addClass("fm-fadeOutLeft fm-is-animate"),setTimeout(function(){a.removeClass(d.options.visibleClass+" fm-fadeOutLeft fm-is-animate").addClass(d.options.hiddenClass)},d.options.animationDuration)):a.addClass(d.options.hiddenClass).removeClass(d.options.visibleClass),!1):"slideRight"==b?(d.supportCssAnimation?(a.addClass("fm-fadeOutRight fm-is-animate"),setTimeout(function(){a.removeClass(d.options.visibleClass+" fm-fadeOutRight fm-is-animate").addClass(d.options.hiddenClass)},d.options.animationDuration)):a.addClass(d.options.hiddenClass).removeClass(d.options.visibleClass),!1):"slideLeftMobile"==b?(d.supportCssAnimation?(a.addClass("fm-fadeOutLeft fm-is-animate"),setTimeout(function(){a.removeClass(d.options.visibleClass+" fm-fadeOutLeft fm-is-animate").addClass(d.options.hiddenClass)},d.options.animationDuration)):a.addClass(d.options.hiddenClass).removeClass(d.options.visibleClass),!1):void 0},breadcrumbAdd:function(a){var b=this,c=a[0].getAttribute("data-name"),d=a.attr("id");return b.mobileMode||b.fullscreenMode?!1:void b.$breadcrumb.append('<li><a class="'+b.options.triggerClass+' fm-is-animate fm-fadeInRight" href="#'+d+'">'+c+"</a></li>")},breadcrumbDelete:function(a){var b=this,c=a.attr("id"),d=b.$breadcrumb.find('a[href="#'+c+'"]').parent().index(),e=b.$breadcrumb.find("li");if(b.mobileMode||b.fullscreenMode)return!1;for(var f=e.length-1;f>=0;f--)f>d&&e[f].remove()},breadcrumbReset:function(){var a=this;return a.mobileMode||a.fullscreenMode?!1:void a.$breadcrumb.html("")},triggerInit:function(){var b=this;b.$elem.find("."+b.options.triggerClass).each(function(c,d){var e=a(d),f=a(e.attr("href")),g=e.find('[class$="-title"]').text().trim(),h=(e.attr("href").replace("#layer-",""),e.closest(".fm-layer").attr("id")),i=f.closest("."+b.options.groupClass);if(e.hasClass(b.options.triggerSearchClass)||e.append('<span class="fm-trigger-icon">'+b.options.TriggerButtonIcon+"</span>"),e.parents(".navbar").length>0)if(b.colorized){var j=b.options.navColor[c-1];e.addClass(b.options.triggerMainClass).attr({"data-group":g}),"undefined"!=typeof b.options.navColor[c]&&e.attr({"data-color":j})}else e.addClass(b.options.triggerMainClass).attr("data-group",g);else f.data("name")||(f.attr("data-name",g),f.find("ul").prepend('<li class="back-item"><a class="'+b.options.backButtonClass+' fm-textline" href="#'+h+'"><h3 class="fm-textline-title">'+b.options.BackButtonContent+"</h3></a></li>")),i.data("group")||i.attr("data-group",g)})},triggerListener:function(){var b=this;b.$elem.on("click","."+b.options.triggerClass+", ."+b.options.backButtonClass,function(c){c.preventDefault();var d=a(this),e=!1,f=!1,g=!1,h=!1,i=b.$elem.find("."+b.options.visibleClass),j=i.attr("id"),k=(i.data("name"),i.closest("."+b.options.groupClass).data("group"));if(d.hasClass(b.options.triggerCloseClass))return b.hidePanel(i,"slideUp",!0),setTimeout(function(){b.breadcrumbReset(),b.$elem.find("."+b.options.triggerMainClass).removeClass("fm-is-active").css("background-color","")},b.options.animationDuration),b.overlayHide(),!1;var l=a(d.attr("href")),m=(l.data("name"),l.attr("id")),n=l.closest("."+b.options.groupClass).data("group");if(d.closest("."+b.options.breadcrumbClass).length>0&&(e=!0),d.hasClass(b.options.triggerMainClass)&&(f=!0),d.hasClass(b.options.backButtonClass)&&(g=!0),d.hasClass(b.options.triggerSearchClass)&&(h=!0,setTimeout(function(){a(b.options.searchLayer).find(".form-control").focus()},b.options.animationDuration)),g)return b.hidePanel(i,"slideRight",!1),b.showPanel(l,"slideRight"),b.breadcrumbDelete(l),!1;if(i.length<1&&!e)return d.addClass("fm-is-active"),b.colorized&&"undefined"!=typeof d.data("color")&&b.colorize(d.data("color")),b.showPanel(l,"slideDown"),b.overlayShow(),b.breadcrumbAdd(l),!1;if(e)return i.length>1?!1:i.length>0&&j!=m?(b.hidePanel(i,"slideRight",!1),b.showPanel(l,"slideRight"),b.breadcrumbDelete(l),!1):!1;if(i.length>0&&!e){if(!f&&j!=m&&k==n)return b.hidePanel(i,"slideLeft",!1),b.showPanel(l,"slideLeft"),b.breadcrumbAdd(l),!1;if(f&&k!=n&&j!=m)return b.mobileMode?h?(b.hidePanel(i,"slideUp",!1),b.showPanel(l,"slideDown"),!1):(b.hidePanel(i,"slideLeft",!1),b.showPanel(l,"slideLeft"),!1):(b.$elem.find("."+b.options.triggerMainClass).removeClass("fm-is-active").css("background-color",""),d.addClass("fm-is-active"),b.hidePanel(i,"slideUp",!1),b.breadcrumbReset(),b.colorized&&"undefined"!=typeof d.data("color")&&b.colorize(d.data("color")),b.showPanel(l,"slideDown"),b.breadcrumbAdd(l),!1);if(f&&k==n)return b.hidePanel(i,"slideUp",!0),setTimeout(function(){b.breadcrumbReset(),d.removeClass("fm-is-active").css("background-color","")},b.options.animationDuration),b.overlayHide(),!1}})},colorize:function(a){var b=this;return b.mobileMode?!1:b.colorized?(b.$wrapper.css("background-color",a),b.$elem.find("."+b.options.breadcrumbClass).css("background-color",b.shadeBlend(-.25,a)),void b.$elem.find(".fm-is-active").css("background-color",b.shadeBlend(-.25,a))):!1},shadeBlend:function(a,b,c){var d=0>a?-1*a:a,e=Math.round,f=parseInt;if(b.length>7){var g=b.split(","),h=(c?c:0>a?"rgb(0,0,0)":"rgb(255,255,255)").split(","),i=f(g[0].slice(4)),j=f(g[1]),k=f(g[2]);return"rgb("+(e((f(h[0].slice(4))-i)*d)+i)+","+(e((f(h[1])-j)*d)+j)+","+(e((f(h[2])-k)*d)+k)+")"}var g=f(b.slice(1),16),h=f((c?c:0>a?"#000000":"#FFFFFF").slice(1),16),l=g>>16,m=g>>8&255,n=255&g;return"#"+(16777216+65536*(e(((h>>16)-l)*d)+l)+256*(e(((h>>8&255)-m)*d)+m)+(e(((255&h)-n)*d)+n)).toString(16).slice(1)}};a.fn.FatMenu=function(a){return this.each(function(){"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw Error("Second argument not supported");if(null===b)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw TypeError("Argument must be an object");return a.prototype=b,new a}}();var b=Object.create(d);b.init(a,this)}),this},a.fn.FatMenu.options={pushOnShow:!1,overlay:!0,mobileBreakpoint:992,navColor:!1,BackButtonContent:'<i class="fa fa-angle-left"></i> Retour',TriggerButtonIcon:'<i class="fa fa-angle-right"></i>',animationDuration:250,fullscreen:!1,wrapperContainer:".fm-wrapper",breadcrumbClass:"fm-breadcrumb",breadcrumbContainer:".fm-breadcrumb ul",groupClass:"fm-group",layerClass:"fm-layer",triggerClass:"fm-trigger",triggerMainClass:"fm-main-trigger",triggerCloseClass:"fm-close-trigger",overlayClass:"fm-overlay",openMenuClass:"fm-is-open",triggerSearchClass:"fm-search-trigger",mobileClass:"fm-is-mobile",backButtonClass:"fm-back-button",visibleClass:"fm-is-visible",hiddenClass:"fm-is-hidden"}}(jQuery,window,document);